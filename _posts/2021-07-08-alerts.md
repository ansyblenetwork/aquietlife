---
title: "Stock alert applet"
---

A stock alert applet which emits a ring/notification for price movements beyond a specified range, and for elevated price/volume activity. This is tuned for events on the intra-day scale.



<div style="min-width:650px; padding: 30px 20px 30px 0px">

<div style="position:fixed; z-index:10; bottom: 10px; background-color:white">
<button onclick="update(); updateAll();" >Refresh</button>
	<span id="msg2" style="padding-left:10px; margin-right:10px;"></span>
	</div>
	
<div style="margin:0px auto 20px auto; text-align:center">
	<a target='_blank' href='https://yolostocks.live/'><strong style='color:#333'>YoloStocks</strong></a>
	<br>
	<span id="yolo">Trending <strong>(weeklys)</strong></span>
	<br>
	<button id="yoloButton" style="margin:10px" onclick="if (this.textContent == 'Load') updateYolo(); else addAll(yoloWeeklyList);">Load</button>
</div>
	
<div style="margin:0px auto 20px auto; text-align:center">
	<a target='_blank' href='https://dashboard.nbshare.io/apps/reddit/wallstreetbets/'><strong style='color:#333'>WSB</strong></a>
	<br>
	<span id="wsb">Trending <strong>(weeklys)</strong></span>
	<br>
	<button id="wsbButton" style="margin:10px" onclick="if (this.textContent == 'Load') updateWSB(); else addAll(wsbWeeklyList);">Load</button>
</div>
	
	
<div style="margin:0px auto 20px auto; text-align:center">
	<a target='_blank' href='https://finviz.com/screener.ashx?v=150&f=sh_opt_option,ta_change_u7&ft=4&o=-change'><strong style='color:#333'>Finviz Gainers</strong></a>
	<br>
	<span id="finvizG">Gainers <strong>(weeklys)</strong></span>
	<br>
	<button id="finvizGButton" style="margin:10px" onclick="if (this.textContent == 'Load') updateFinvizG(); else addAll(finvizGWeeklyList);">Load</button>
</div>
	
<div style="margin:0px auto 20px auto; text-align:center">
	<a target='_blank' href='https://finviz.com/screener.ashx?v=150&f=sh_opt_option,ta_change_d7&ft=4&o=change'><strong style='color:#333'>Finviz Losers</strong></a>
	<br>
	<span id="finvizL">Losers <strong>(weeklys)</strong></span>
	<br>
	<button id="finvizLButton" style="margin:10px" onclick="if (this.textContent == 'Load') updateFinvizL(); else addAll(finvizLWeeklyList);">Load</button>
</div>
	
<div style="margin:0px auto 20px auto; text-align:center">
	<a target='_blank' href='https://finviz.com/screener.ashx?v=150&s=ta_mostvolatile&f=sh_opt_option&ft=4&o=-change'><strong style='color:#333'>Finviz Volatile</strong></a>
	<br>
	<span id="finvizV">Volatile <strong>(weeklys)</strong></span>
	<br>
	<button id="finvizVButton" style="margin:10px" onclick="if (this.textContent == 'Load') updateFinvizV(); else addAll(finvizVWeeklyList);">Load</button>
</div>
	
<div style="margin:0px auto 20px auto; text-align:center">
	<a target='_blank' href='https://stocktwits.com/'><strong style='color:#333'>Stocktwits</strong></a>
	<br>
	<span id="stocktwits">Trending <strong>(weeklys)</strong></span>
	<br>
	<button id="stButton" style="margin:10px" onclick="if (this.textContent == 'Load') updateStocktwits(); else addAll(stWeeklyList);">Load</button>
</div>
	
<div style="margin:0px auto 20px auto; text-align:center">
	<a target='_blank' href='https://finance.yahoo.com/calendar/earnings'><strong style='color:#333'>Earnings</strong></a>
	<br>
	<span id="earnings">Earnings within a week <strong>(weeklys only)</strong></span>
	<br>
	<button id="earningsButton" style="margin:10px" onclick="if (this.textContent == 'Load') updateEarnings(); else addAll(earnings)">Load</button>
</div>
	
<div style="margin-bottom:20px;">
<audio id="audiodown" src="{{ "case-closed-531.mp3" | relative_url }}" autostart="false"></audio>
<audio id="audio" src="{{ "that-was-quick.mp3" | relative_url }}" autostart="false"></audio>
<button onclick="toggleSound(this);" id="soundButton" class="active">Sound On</button>
<button onclick="toggleNotifications(this);" id="notificationButton">Notifications Off</button>
<div style="float:right">
	<span id="msg" style="margin-right:10px;"></span>
	<button onclick="update(); updateAll();">Refresh</button>
	<button onclick="toggleAlerts(this);">Auto-Refresh Off</button>
</div>
</div>
	
	
	
<div style="margin-bottom:10px; text-align:center; padding-top:20px; border-top:solid" id="merge">Top 5 from each above source, ranked by options rate of return</div>
	<div style="margin-bottom:20px; text-align:center">
<button id="mergeButton" onclick="mergeAll()">Rank</button>
	</div>
<div style="width:max-content; margin:auto; margin-bottom:10px">
<input onkeyup="if (event.keyCode == 27) this.value = '';
		else if (event.keyCode == 13) {
			event.preventDefault(); 
			optionsChain();
		}"
id="optionsInput" type="text" style="margin:10px;" autocomplete="off" placeholder="Options chain..."><button onclick="optionsChain()">Fetch</button>
</div>
	<ul id="optionsPrice" style="list-style-type:none; padding-left:0px"></ul>
<ul style="list-style-type:none; padding-left:0px;margin-bottom:20px; border-bottom:solid" id="optionslist"></ul>
	
	
	
	
	
<div style="width:max-content; margin:auto">
<input id="defaultLower" style="width:60px" onblur="if (!this.value) this.value = 0; defaultLower = val(this);" type="text" autocomplete="off" value="2" placeholder="Margin..."> % 
<input onkeyup="if (event.keyCode == 27) this.value = '';
		else if (event.keyCode == 13) {
			event.preventDefault(); 
			submitTicker();
		}"
id="tickerInput" type="text" style="margin-left:10px; margin-right:10px" autocomplete="off" placeholder="Monitor stock..."> 
<input id="defaultUpper" style="width:60px" onblur="if (!this.value) this.value = 0; defaultUpper = val(this)" type="text" autocomplete="off" value="2" placeholder="Margin..."> % 
</div>
<ul style="list-style-type:none; padding-left:0px" id="stocklist"></ul>	
	
</div>


<script> ////////////////////////////////////////////////////////////////

var fixedInterestRate = 10;
	
var stList = [];
var stWeeklyList = [];
var yoloList = [];
var yoloWeeklyList = [];
var finvizGList = [];
var finvizGWeeklyList = [];
var finvizLList = [];
var finvizLWeeklyList = [];
var finvizVList = [];
var finvizVWeeklyList = [];
var wsbList = [];
var wsbWeeklyList = [];
var earnings = [];
	var preEarnings = [];
	var postEarnings = [];
var merge = [];
	
var currentOption = "";
var currentOptionData = {};
var tickerList = [];
var volumes = {};
var prices = {};
	
var defaultUpper = 2;
var defaultLower = 2;
let yahootimer;
let sttimer;
let wsbtimer;
	
var d = new Date();
D('msg2').textContent = d.toLocaleTimeString();
if (Notification.permission === "granted") activate(D('notificationButton'), "Notifications On");
setInput(D('defaultLower')); 
setInput(D('defaultUpper'));
	
	
function checkDefData(defData, altData, data) {      
	for (let contractStrike in data) {	
		let contract = data[contractStrike][0];

		let dstrike = defData.strike;
		let newstrike = contract.strikePrice;
		if (contract.putCall == "PUT") {
			dstrike = -dstrike; newstrike = -newstrike;
		}
		if (contract.ask > 0) {	
			if (defData.premium == 0 || contract.ask < defData.premium || (contract.ask == defData.premium && newstrike < dstrike)) {
				defData.strike = contract.strikePrice;
				defData.premium = contract.ask;
				defData.strikeName = contractStrike;
			}
		}
	}
	
	let candData = {strike:defData.strike, premium:defData.premium, strikeName:defData.strikeName};
	
	while (true) {	
		altData.strike = candData.strike;
		altData.premium = candData.premium;
		altData.strikeName = candData.strikeName;
		
		candData = {strike:0, premium:0, strikeName:""};
		let currentContract;
		for (let contractStrike in data) {
			let contract = data[contractStrike][0];

			let cstrike = candData.strike;
			let astrike = altData.strike;
			let newstrike = contract.strikePrice;
			if (contract.putCall == "PUT") {
				cstrike = -cstrike; astrike = -astrike; newstrike = -newstrike;
			}
			if (contract.ask > altData.premium && newstrike < astrike
				&& (candData.premium == 0 || contract.ask < candData.premium || (contract.ask == candData.premium && newstrike < cstrike))) {
				candData.strike = contract.strikePrice;
				candData.premium = contract.ask;
				candData.strikeName = contractStrike;	
				currentContract = contract;
			}
		}
		
		if (!currentContract || altData.strike == candData.strike || interestRate(currentContract, altData) > fixedInterestRate) break;
	}
}	
	
	
function interestRate(contract, defData) {
	if (contract.ask <= defData.premium) return 0;
	if (contract.putCall == "CALL")	return 100*(contract.ask - defData.premium)*365*1000*60*60*24
			/((defData.strike - contract.strikePrice)*(1000*60*60*66 + contract.expirationDate-Date.now()));
	else return 100*(contract.ask - defData.premium)*365*1000*60*60*24
			/((contract.strikePrice - defData.strike)*(1000*60*60*66 + contract.expirationDate-Date.now()));
}
	
function returnRate(contract, defData) {
	if (contract.bid <= defData.premium) return 0;
	if (contract.putCall == "CALL")	return 100*(contract.bid - defData.premium)*365*1000*60*60*24
			/((defData.strike - contract.strikePrice)*(1000*60*60*66 + contract.expirationDate-Date.now()));
	else return 100*(contract.bid - defData.premium)*365*1000*60*60*24
			/((contract.strikePrice - defData.strike)*(1000*60*60*66 + contract.expirationDate-Date.now()));
}
	
function marginThreshold(contract) {
	if (contract.daysToExpiration > 2) {
		if (contract.putCall == "CALL") return 5;
		else return 5;
	} else return 0;
}

function margin(contract, data) {
	let returnMargin;
	if (contract.putCall == "CALL") returnMargin = 100*(contract.strikePrice - data.underlyingPrice)/data.underlyingPrice;
	else returnMargin = 100*(data.underlyingPrice - contract.strikePrice)/data.underlyingPrice;
	if (returnMargin < 2) return round(returnMargin, true);
	else return Math.round(returnMargin);
}
	
	
function optionsChain() {	
	if (D('optionsInput').value.toUpperCase()) updateOptions(true);
}
							       
function updateOptions(newOption) {	
	let query = currentOption;
	if (newOption) query = D('optionsInput').value.toUpperCase();
			     
		
		
	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-Ticker': query }}).then(function(response) {
		return response.json();
	}).then(function(data) {
		currentOptionData = data;
		currentOptionData.symbol = query;
		if (currentOption == query) {
			for (let i = 0; i < D('optionslist').children.length; i++) {
				if (Math.sqrt(parseFloat(D('optionslist').children[i].children[0].title)) * currentOptionData.volatility.split('% ')[0] * 2 < 										parseFloat(D('optionslist').children[i].children[1].title))
				D('optionslist').children[i].children[1].style.backgroundColor = "#ddf";
			}
		}
	});
	
	let d = new Date(Date.now() + 1000*60*60*24*12).toISOString();								       
	fetch("https://api.tdameritrade.com/v1/marketdata/chains?apikey=T1V8GYUYK3GKC7HG3L23O9XBJ5OH1C4F&symbol=" 
		+ query + "&range=OTM&toDate=" + d).then(function(response) {
		return response.json();
	}).then(function(data) {
		console.log(data);
		if (data.status == "SUCCESS") {
	
			if (currentOption && query != currentOption && D('optionsPrice').children.length > 0) D('stocklist').appendChild(D('optionsPrice').firstChild);
			currentOption = query;
			submitTicker(D('optionsPrice'), currentOption);
	
			D('optionslist').textContent = "";	
			function buildDefense(contract) {	
				let returnrate = 0;
				let returnrate2 = 0;

				let myli = buildli(contract, margin(contract, data), returnrate, returnrate2);
				// myli.style.fontWeight = "bold";
				let rate = 255 - 100*16*contract.ask;
								       
				if (rate < 0) myli.children[5].style.backgroundColor = "#00ffff";
				else if (rate < 16)  myli.children[5].style.backgroundColor = "#0" + rate.toString(16) + "ffff";
				else  myli.children[5].style.backgroundColor = "#" + rate.toString(16) + "ffff";
				D('optionslist').appendChild(myli);
				return myli;
			}
			function buildli(contract, margin, returnrate, returnrate2, defleg, defprem) {
				let li = make('li');
				li.style.textAlign = "center";		
				let col = addCol("$" + contract.strikePrice, "75px", li);
				let weeksToExp = (1 + (contract.expirationDate-Date.now())/(1000*60*60*24))/7;
				col.title = weeksToExp;
				if (contract.putCall == "CALL") col = addCol("+" + margin + "%", "75px", li);
				else col = addCol("-" + margin + "%", "75px", li);
				if (defprem) {
					col.title = margin;
					if (currentOption == currentOptionData.symbol 
						&& Math.sqrt(weeksToExp) * currentOptionData.volatility.split('% ')[0] * 2 < margin) 	
						col.style.backgroundColor = "#ddf";
				}
								       
				let colstring = Math.round(returnrate) + '/' + Math.round(returnrate2) + "%";
				col = addCol(colstring, "150px", li);
	
				let rate = 295 - 2*Math.round(returnrate2);
				if (rate < 0) col.style.backgroundColor = "#00ffff";
				else if (rate < 16) col.style.backgroundColor = "#0" + rate.toString(16) + "ffff";
				else col.style.backgroundColor = "#" + rate.toString(16) + "ffff";
				
				let premdiff = "x.xx";
				if (defprem) premdiff = (contract.bid - defprem).toFixed(2);
				col = addCol(premdiff, "50px", li);		   
				if (rate < 0) col.style.backgroundColor = "#00ffff";
				else if (rate < 16) col.style.backgroundColor = "#0" + rate.toString(16) + "ffff";						   
				else col.style.backgroundColor = "#" + rate.toString(16) + "ffff";
	
				col = addCol(contract.bid.toFixed(2) + ' x ' + contract.bidSize, "100px", li);	
				if (rate < 0) col.style.backgroundColor = "#00ffff";
				else if (rate < 16) col.style.backgroundColor = "#0" + rate.toString(16) + "ffff";						   
				else col.style.backgroundColor = "#" + rate.toString(16) + "ffff";
	
				col = addCol(contract.ask.toFixed(2) + ' x ' + contract.askSize, "100px", li);
	
				if (contract.askSize > 5*contract.bidSize && contract.ask < contract.bid + 0.06) col.style.backgroundColor = "#ddf";
	
				addCol(contract.last.toFixed(2), "50px", li);							
				let lastTrade = "x";
				if (contract.tradeTimeInLong) lastTrade = Math.round((Date.now() - contract.tradeTimeInLong)/60000);			       
				addCol(lastTrade + "m", "75px", li);
				addCol(contract.totalVolume, "50px", li);
				li.classList.add("libold");
	
				if (defleg) {
					li.onmouseenter = function() { defleg.style.fontWeight = "bold"; }
					li.onmouseleave = function() { defleg.style.fontWeight = ""; }
				}
				return li;
			}
			function addCol(text, width, li) {								       
				let col = make('span');
				col.style.width = width;
				col.style.display = "inline-block";
				col.style.textAlign = "center";
				col.textContent = text;
				li.appendChild(col);  
				return col;
			}			
					
			for (let contractDate in data.callExpDateMap) {
						   
			/////////////////////// CALLS //////////////////////////////////
				
				let defData = {strike:0, premium:0, strikeName:""};
				let altData = {strike:0, premium:0, strikeName:""};
				checkDefData(defData, altData, data.callExpDateMap[contractDate]);
	
				let calldefleg = buildDefense(data.callExpDateMap[contractDate][defData.strikeName][0]);
				let calldefleg2 = buildDefense(data.callExpDateMap[contractDate][altData.strikeName][0]);
				let referenceli = calldefleg2;
				       
				let callArray = [];
				for (let contractStrike in data.callExpDateMap[contractDate]) {
					let contract = data.callExpDateMap[contractDate][contractStrike][0];
					if (margin(contract, data) >  marginThreshold(contract)) {
						returnrate = returnRate(contract, defData);
						returnrate2 = returnRate(contract, altData);
						if (returnrate2 > 19) callArray.unshift(contract);
					}
				}	       
	
				let maxReturn = 0;
				callArray.forEach(function(contract) {
					returnrate = returnRate(contract, defData);
					returnrate2 = returnRate(contract, altData);
					
					if (maxReturn < returnrate2) {
						maxReturn = returnrate2;
						let prem = altData.premium;
						D('optionslist').appendChild(buildli(contract, margin(contract, data), returnrate, returnrate2, calldefleg2, prem));
					}
				});
	
			/////////////////////// MIDDLE //////////////////////////////////
	
				referenceli = make('li');
				referenceli.style.textAlign = "center";
				referenceli.style.fontWeight = "bold";
				addCol("$" + round(data.underlyingPrice), "75px", referenceli);
				addCol(data.symbol + " " + data.callExpDateMap[contractDate][defData.strikeName][0].daysToExpiration + " DTE", "650px", referenceli);
				D('optionslist').appendChild(referenceli);	
	
			/////////////////////// PUTS //////////////////////////////////
	
				defData = {strike:0, premium:0, strikeName:""};
				altData = {strike:0, premium:0, strikeName:""};
				checkDefData(defData, altData, data.putExpDateMap[contractDate]);
				
				let putdefleg2 = buildDefense(data.putExpDateMap[contractDate][altData.strikeName][0]);
				let putdefleg = buildDefense(data.putExpDateMap[contractDate][defData.strikeName][0]);
				putdefleg.style.marginBottom = "30px";
	
				let putArray = [];
				for (let contractStrike in data.putExpDateMap[contractDate]) {
					let contract = data.putExpDateMap[contractDate][contractStrike][0];
					if (margin(contract, data) >  marginThreshold(contract)) {
						returnrate = returnRate(contract, defData);
						returnrate2 = returnRate(contract, altData);
						if (returnrate2 > 19) putArray.push(contract);
					}
				}
	
				maxReturn = 0;
				putArray.forEach(function(contract) {
					returnrate = returnRate(contract, defData);
					returnrate2 = returnRate(contract, altData);
					
					if (maxReturn < returnrate2) {
						maxReturn = returnrate2;
						let prem = altData.premium;	
						D('optionslist').insertBefore(buildli(contract, margin(contract, data), returnrate, returnrate2, putdefleg2, prem), 
										referenceli.nextElementSibling);
					}
				});
			}
		} else D('msg2').textContent = "No options data found.";				       	       
	});								       
}
	
function mergeAll() {
	merge = [];
	for (let i = 0; (i < stWeeklyList.length) && (i < 5); i++) {
		if (!merge.includes(stWeeklyList[i])) merge.push(stWeeklyList[i]);						
	}	
	for (let i = 0; (i < finvizGWeeklyList.length) && (i < 5); i++) {
		if (!merge.includes(finvizGWeeklyList[i])) merge.push(finvizGWeeklyList[i]);						
	}
	for (let i = 0; (i < finvizLWeeklyList.length) && (i < 5); i++) {
		if (!merge.includes(finvizLWeeklyList[i])) merge.push(finvizLWeeklyList[i]);						
	}
	for (let i = 0; (i < finvizVWeeklyList.length) && (i < 5); i++) {
		if (!merge.includes(finvizVWeeklyList[i])) merge.push(finvizVWeeklyList[i]);						
	}
	for (let i = 0; (i < yoloWeeklyList.length) && (i < 5); i++) {
		if (!merge.includes(yoloWeeklyList[i])) merge.push(yoloWeeklyList[i]);						
	}
	for (let i = 0; (i < wsbWeeklyList.length) && (i < 5); i++) {
		if (!merge.includes(wsbWeeklyList[i])) merge.push(wsbWeeklyList[i]);						
	}
	for (let i = 0; (i < preEarnings.length) && (i < 5); i++) {
		if (!merge.includes(preEarnings[i])) merge.push(preEarnings[i]);						
	}
	for (let i = 0; (i < postEarnings.length) && (i < 5); i++) {
		if (!merge.includes(postEarnings[i])) merge.push(postEarnings[i]);						
	}
	
	let mergeString = "";
	for (let i = 0; i < merge.length; i++) {
		mergeString += "<strong  style='color:#333'>" + merge[i] + "</strong> ";
	}
	if (mergeString) D('merge').innerHTML = mergeString;
						       
	let d = new Date(Date.now() + 1000*60*60*24*12).toISOString();
	let maxdata =  [];
					 
	let promises = [];
	for (let i = 0; i < merge.length; i++) {	 
	promises.push(
	fetch("https://api.tdameritrade.com/v1/marketdata/chains?apikey=T1V8GYUYK3GKC7HG3L23O9XBJ5OH1C4F&symbol="
						+ merge[i]
						+ "&range=OTM&toDate="
						+ d).then(function(response) {
		return response.json();
	}).then(function(data) {
		console.log(data);
		if (data.status == "SUCCESS") {
			maxdata[i] = {symbol:merge[i], call:0, put:0};
			for (let contractDate in data.callExpDateMap) {
						   
			/////////////////////// CALLS //////////////////////////////////
						   
				let defData = {strike:0, premium:0, strikeName:""};
				let altData = {strike:0, premium:0, strikeName:""};
				checkDefData(defData, altData, data.callExpDateMap[contractDate]);
								       
				for (let contractStrike in data.callExpDateMap[contractDate]) {
					let contract = data.callExpDateMap[contractDate][contractStrike][0];
					if (margin(contract, data) > marginThreshold(contract)) {
						returnrate = returnRate(contract, defData);
						returnrate2 = returnRate(contract, altData);
						if (returnrate2 > 19 && returnrate2 > maxdata[i].call) maxdata[i].call = returnrate2;
					}
				}
	
			/////////////////////// PUTS //////////////////////////////////
	
				
				defData = {strike:0, premium:0, strikeName:""};
				altData = {strike:0, premium:0, strikeName:""};
				checkDefData(defData, altData, data.putExpDateMap[contractDate]);	
								       
				for (let contractStrike in data.putExpDateMap[contractDate]) {
					contract = data.putExpDateMap[contractDate][contractStrike][0];
					if(margin(contract, data) > marginThreshold(contract)) {
						returnrate = returnRate(contract, defData);
						returnrate2 = returnRate(contract, altData);
						if (returnrate2 > 19 && returnrate2 > maxdata[i].put) maxdata[i].put = returnrate2;
					}
				}
			}
		}					       	       
	})
	);
	}				 
	
	Promise.all(promises).then(function() {
		console.log(maxdata);
		maxdata.sort(function(a,b) {
			return b.put - a.put;
		});
	
		let mergeString = "Put order: ";
		for (let i = 0; i < maxdata.length; i++) {
			if (preEarnings.includes(maxdata[i].symbol)) 
			mergeString += `<strong style="cursor:pointer; color:#b0b" onclick="D('optionsInput').value = '${maxdata[i].symbol}'; optionsChain()" style='color:#333'>${maxdata[i].symbol}</strong> `;
			else mergeString += `<strong style="cursor:pointer" onclick="D('optionsInput').value = '${maxdata[i].symbol}'; optionsChain()" style='color:#333'>${maxdata[i].symbol}</strong> `;
		}
				
		maxdata.sort(function(a,b) {
			return b.call - a.call;
		});		   
		mergeString += "<br>Call order: ";
		for (let i = 0; i < maxdata.length; i++) {
			if (preEarnings.includes(maxdata[i].symbol)) 
			mergeString += `<strong style="cursor:pointer; color:#b0b" onclick="D('optionsInput').value = '${maxdata[i].symbol}'; optionsChain()" style='color:#333'>${maxdata[i].symbol}</strong> `;
			else mergeString += `<strong style="cursor:pointer" onclick="D('optionsInput').value = '${maxdata[i].symbol}'; optionsChain()" style='color:#333'>${maxdata[i].symbol}</strong> `;
		}				
		if (mergeString) D('merge').innerHTML = mergeString;
	});				 				 
}	
	
	
///// Trending stocks script /////////////////////////////////////////////////
	
function updateEarnings() {
	earnings = [];
	preEarnings = [];
	postEarnings = [];
	let weeklyQuery = 'https://query1.finance.yahoo.com/v7/finance/quote?symbols=' + weeklys.join();

	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-URL': weeklyQuery }}).then(function(response) {
		return response.json();
	}).then(function(data) { 

		if (data.quoteResponse.result) {
			let earningsTime = {};
			let earningsName = {};
			let earningsString = "";
			data.quoteResponse.result.forEach(function(stockData) {
				if ((stockData.earningsTimestamp - Date.now()/1000 < 0 && stockData.earningsTimestamp - Date.now()/1000 > -2*24*60*60) ||
				(stockData.earningsTimestamp - Date.now()/1000 >= 0 
				&& stockData.earningsTimestampStart == stockData.earningsTimestampEnd && stockData.earningsTimestamp - Date.now()/1000 < 2*24*60*60)) {
					earnings.push(stockData.symbol);
					earningsTime[stockData.symbol] = stockData.earningsTimestamp;
					earningsName[stockData.symbol] = stockData.longName;
				}
				if (stockData.earningsTimestamp - Date.now()/1000 < 0 && stockData.earningsTimestamp - Date.now()/1000 > -2*24*60*60)
					postEarnings.push(stockData.symbol);
				if (stockData.earningsTimestamp - Date.now()/1000 >= 0 
				&& stockData.earningsTimestampStart == stockData.earningsTimestampEnd && stockData.earningsTimestamp - Date.now()/1000 < 2*24*60*60)
					preEarnings.push(stockData.symbol);
			});	      
			earnings.sort(function(x, y) {
				return earningsTime[x]- earningsTime[y];
			});    
			preEarnings.sort(function(x, y) {
				return earningsTime[x]- earningsTime[y];
			});
			postEarnings.sort(function(x, y) {
				return  earningsTime[y] - earningsTime[x];
			});
			earnings.forEach(function(stock) {
				if (earningsTime[stock] - Date.now()/1000 < 0) earningsString += "<a title='" + earningsName[stock] 
				+ "' target='_blank' href='https://finance.yahoo.com/quote/" + stock + "'><strong style='color:#333'>" + stock + "</strong></a> ";
				else earningsString += "<a title='" + earningsName[stock] 
				+ "' target='_blank' href='https://finance.yahoo.com/quote/" + stock + "'><strong style='color:#b0b'>" + stock + "</strong></a> ";							      
			});
			D('earnings').innerHTML = earningsString;
			D('earningsButton').textContent = "Monitor All";
		}
	});
}
	
function updateFinvizG() {
	let query = 'https://finviz.com/screener.ashx?v=150&f=sh_opt_option,ta_change_u7&ft=4&o=-change';
		
	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-Screen': query }}).then(function(response) {
		return response.json();
	}).then(function(data) {
		if (data.length > 0) {
		finvizGList = [];
		let prevWeekly = finvizGWeeklyList;
		finvizGWeeklyList = [];
		let stString = "(" + new Date().toLocaleTimeString() + "): ";
		data.forEach(function(stockData) {
			stString += printWeekly(stockData, finvizGList, finvizGWeeklyList, prevWeekly, "Finviz gainers");
		});
		D('finvizG').innerHTML = stString;
		D('finvizGButton').textContent = "Monitor Weeklys";
		}
	});
}
function updateFinvizL() {
	let query = 'https://finviz.com/screener.ashx?v=150&f=sh_opt_option,ta_change_d7&ft=4&o=change';
		
	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-Screen': query }}).then(function(response) {
		return response.json();
	}).then(function(data) {
		if (data.length > 0) {
		finvizLList = [];
		let prevWeekly = finvizLWeeklyList;
		finvizLWeeklyList = [];
		let stString = "(" + new Date().toLocaleTimeString() + "): ";
		data.forEach(function(stockData) {
			stString += printWeekly(stockData, finvizLList, finvizLWeeklyList, prevWeekly, "Finviz losers");
		});
		D('finvizL').innerHTML = stString;
		D('finvizLButton').textContent = "Monitor Weeklys";
		}
	});
}
function updateFinvizV() {
	let query = 'https://finviz.com/screener.ashx?v=150&s=ta_mostvolatile&f=sh_opt_option&ft=4&o=-change';
		
	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-Screen': query }}).then(function(response) {
		return response.json();
	}).then(function(data) {
		if (data.length > 0) {
		finvizVList = [];
		let prevWeekly = finvizVWeeklyList;
		finvizVWeeklyList = [];
		let stString = "(" + new Date().toLocaleTimeString() + "): ";
		data.forEach(function(stockData) {
			stString += printWeekly(stockData, finvizVList, finvizVWeeklyList, prevWeekly, "Finviz volatile");
		});
		D('finvizV').innerHTML = stString;
		D('finvizVButton').textContent = "Monitor Weeklys";
		}
	});
}
	
function updateYolo() {
	let query = 'https://yolostocks.live/downloads/wallstreetbets.csv';
		
	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-URL': query }}).then(function(response) {
		return response.text();
	}).then(function(data) {
		let preYoloList = data.replaceAll(" ", ",").replaceAll("\n", ",").split(",");
		yoloList = [];
		let prevWeekly = yoloWeeklyList;
		yoloWeeklyList = [];
		let yoloString = "(" + new Date().toLocaleTimeString() + "): ";
		preYoloList.forEach(function(symbol) {
			if (symbol && /[A-Z]/.test(symbol[0])) yoloString += printWeekly(symbol, yoloList, yoloWeeklyList, prevWeekly, "YoloStocks");
		});
		D('yolo').innerHTML = yoloString;
		D('yoloButton').textContent = "Monitor Weeklys";
	});
}

function updateWSB() {
	let query = 'https://dashboard.nbshare.io/api/v1/apps/reddit';
		
	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-URL': query }}).then(function(response) {
		return response.json();
	}).then(function(data) {		
		wsbList = [];
		let prevWeekly = wsbWeeklyList;
		wsbWeeklyList = [];
		let wsbString = "(" + new Date().toLocaleTimeString() + "): ";
		for (let i = 0; i < 15; i++) {
			wsbString += printWeekly(data[i].ticker, wsbList, wsbWeeklyList, prevWeekly, "WSB");
		}
		D('wsb').innerHTML = wsbString;
		D('wsbButton').textContent = "Monitor Weeklys";
	});
}
					      
function updateStocktwits() {
	let query = 'https://api.stocktwits.com/api/2/trending/symbols/equities.json';
		
	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-URL': query }}).then(function(response) {
		return response.json();
	}).then(function(data) {
		stList = [];
		let prevWeekly = stWeeklyList;
		stWeeklyList = [];
		let stString = "(" + new Date().toLocaleTimeString() + "): ";
		data.symbols.forEach(function(stockData) {
			stString += printWeekly(stockData.symbol, stList, stWeeklyList, prevWeekly, "Stocktwits", stockData.title);
		});
		D('stocktwits').innerHTML = stString;
		D('stButton').textContent = "Monitor Weeklys";
	});
}

function printWeekly(symbol, stList, stWeeklyList, prevWeekly, sitename, title) {
	if (monthlys.includes(symbol) || weeklys.includes(symbol)) {
		stList.push(symbol);
		if (weeklys.includes(symbol)) {
			stWeeklyList.push(symbol);
			if (prevWeekly.length > 0 && !prevWeekly.includes(symbol)) {
				if (active(D('soundButton'))) D('audio').play();
				if (active(D('notificationButton'))) new Notification(symbol + " is newly trending on " + sitename + ".");
				return stLinkify("<strong style='color:blue'>" + symbol + "</strong></a>", symbol, title) + " ";
			} else return stLinkify("<strong style='color:#333'>" + symbol + "</strong></a>", symbol, title) + " ";
		} else return stLinkify(symbol, symbol, title) + " ";
	} else return "";
}	
	
function stLinkify(str, stock, title) {
	if (title) return "<a title='" + title + "' target='_blank' href='https://stocktwits.com/symbol/" + stock + "'>" + str + "</a>";
	else return "<a target='_blank' href='https://stocktwits.com/symbol/" + stock + "'>" + str + "</a>";
}

	
///// Toggle buttons script /////////////////////////////////////////////////
	
	
function toggleAlerts(elt) {
	if (yahootimer) {
		deactivate(elt, "Auto-Refresh Off");
		clearInterval(yahootimer);
		clearInterval(sttimer);
		clearInterval(wsbtimer);
		yahootimer = "";
		for (let x in prices) {
			prices[x] = [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];
			volumes[x] = [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];
		}
	} else {	
		activate(elt, "Auto-Refresh On");
		update(); 
		updateAll();
		yahootimer = setInterval(function() { updateOptions(); update(); }, 10000);
		sttimer = setInterval(function() { updateStocktwits(); updateFinvizG(); updateFinvizL(); }, 60000);
		wsbtimer = setInterval(function() { updateWSB(); updateYolo(); updateFinvizV(); }, 30000*7);
	}
}
	
function toggleSound(elt) {
	if (active(elt)) deactivate(elt, "Sound Off");
	else {	
		activate(elt, "Sound On");
		D('audio').play();
	}
}
	
function toggleNotifications(elt) {
	if (elt.textContent == "Notifications On") deactivate(elt, "Notifications Off");
	else {	
		if (!("Notification" in window)) alert("This browser does not support desktop notification");
		else if (Notification.permission === "granted") activate(elt, "Notifications On");
		else {
		Notification.requestPermission().then(function (permission) {
			if (permission === "granted") activate(elt, "Notifications On");
		});
		}	
	}
}
	
	
///// Monitor panel script /////////////////////////////////////////////////
	
function val(elt) { return parseFloat(elt.value); }
						     
function updateDisplay(stock, fixed) {			
	let current = parseFloat(D(stock + "-current").textContent);
	let upelt = D(stock + "-upperPercent");
	let lpelt = D(stock + "-lowerPercent");	
	let lower = D(stock + "-lower");
	let upper = D(stock + "-upper");
	let upperMargin = D(stock + "-upperMargin");
	let lowerMargin = D(stock + "-lowerMargin");
	let slider = D(stock + "-slider");
						 
	if (!upelt.value) upelt.value = 0;
	if (!lpelt.value) lpelt.value = 0;
	if (!upperMargin.value) upperMargin.value = 0;
	if (!lowerMargin.value) lowerMargin.value = 0; 
	if (!lower.value) lower.value = current;
	if (!upper.value) upper.value = current;
					     
	if (fixed == lpelt || fixed == upelt) {				
		lower.value = round( current * (1 - val(lpelt)/100));
		upper.value = round( current * (1 + val(upelt)/100));
	} else if (fixed == upperMargin || fixed == lowerMargin) {	
		lower.value = round(current - val(lowerMargin));
		upper.value = round(current + val(upperMargin));
	} else if (fixed == slider) {
		let oldLower = val(lower);
		lower.value = round(current - (slider.value * (val(upper) - val(lower)) / 100));
		upper.value = round(val(upper) - oldLower + val(lower));
	}	 
				 
	if (lpelt != document.activeElement) lpelt.value = round(100*(current - val(lower))/current, true);
	if (upelt != document.activeElement) upelt.value = round(100*(val(upper) - current)/current, true);
	if (upperMargin != document.activeElement) upperMargin.value = round(val(upper) - current);
	if (lowerMargin != document.activeElement) lowerMargin.value = round(current - val(lower));
	if (val(upper) > val(lower)) {
		slider.value = Math.round((current - val(lower))/(val(upper) - val(lower))*100);
		if (slider.value > 100) slider.value = 100;
		if (slider.value < 0) slider.value = 0;
	} else { 
		if (current > val(upper)) slider.value = 100;
		else if (current < val(lower)) slider.value = 0;
		else slider.value = 50;
	}
						 
	if (val(lower) > current) {
		if (lower.style.fontWeight != "bold") {
			if (active(D('soundButton'))) D('audiodown').play();
			if (active(D('notificationButton'))) new Notification(stock + " is down to $" + current);
			lower.style.fontWeight = "bold";
			lpelt.style.fontWeight = "bold";
			lowerMargin.style.fontWeight = "bold";
		}
	} else {
		lower.style.fontWeight = "initial";
		lpelt.style.fontWeight = "initial";
		lowerMargin.style.fontWeight = "initial";
	}
	if (val(upper) < current) {
		if (upper.style.fontWeight != "bold") {
			if (active(D('soundButton'))) D('audio').play();
			if (active(D('notificationButton'))) new Notification(stock + " is up to $" + current);
			upper.style.fontWeight = "bold";
			upelt.style.fontWeight = "bold";
			upperMargin.style.fontWeight = "bold";
		}
	} else {
		upper.style.fontWeight = "initial";
		upelt.style.fontWeight = "initial";
		upperMargin.style.fontWeight = "initial";
	}
					      
	if (lower.style.fontWeight == "bold") {
		D(stock + "-current").style.fontWeight = "bold";
		D(stock + "-current").style.color = "#F00";
	} else if (upper.style.fontWeight == "bold") {
		D(stock + "-current").style.fontWeight = "bold";
		D(stock + "-current").style.color = "#3b7";
	} else {	      
		D(stock + "-current").style.fontWeight = "initial";
		D(stock + "-current").style.color = "#333";
	}
}

function update() {
	if (tickerList.length > 0) {
	let query = 'https://query1.finance.yahoo.com/v7/finance/quote?symbols=' + tickerList.join();
		
	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-URL': query }}).then(function(response) {
		return response.json();
	}).then(function(data) { 
	
	if (data.quoteResponse.result) {
		d = new Date();
		D('msg').textContent = d.toLocaleTimeString();
		D('msg2').textContent = d.toLocaleTimeString();
	
		data.quoteResponse.result.forEach(function(stockData) {
			let stock = stockData.symbol;
			let price = stockData.regularMarketPrice;
			let volume = stockData.regularMarketVolume;
			let dailyPercent = stockData.regularMarketChangePercent;
			let daily = stockData.regularMarketChange;
			D(stock + "-current").textContent = round(price);	
			D(stock + "-percent").textContent = stock + " " + round(daily) + " (" + round(dailyPercent, true) + "%)";
	
			if (dailyPercent > 0) D(stock + "-percent").style.color = "#3b7";
			else if (dailyPercent < 0) D(stock + "-percent").style.color = "#F00";
			else D(stock + "-percent").style.color = "#333";
			updateDisplay(stock);
						  
			if (volumes[stock][volumes[stock].length - 1] != volume ||
			    prices[stock][prices[stock].length - 1] != price) {
				volumes[stock].shift();			  
				volumes[stock].push(volume);
				prices[stock].shift();			  
				prices[stock].push(price);
									  
				function avgVariation(arr) {
					let diffarr = [];
					for (let i = 0; i < arr.length - 1; i++) {
						if (arr[i + 1] > 0 && arr[i] > 0) {
							if (arr[i + 1] > arr[i]) diffarr.push(arr[i + 1] - arr[i]);
							else diffarr.push(arr[i] - arr[i + 1]);
						}
					}
					if (diffarr.length < arr.length - 2) return -1;

					var total = 0;
					for(var i = 0; i < diffarr.length; i++) {
					    total += diffarr[i];
					}
					return avg = total / diffarr.length;
				}

				function currentVariation(arr) {
					if (arr[arr.length - 1] > 0 && arr[arr.length - 2] > 0) return arr[arr.length - 1] - arr[arr.length - 2];
					else return -1;
				}

				let avgVol = avgVariation(volumes[stock]);
				let avgPrice = avgVariation(prices[stock]);
				let curVol = currentVariation(volumes[stock]);
				let curPrice = currentVariation(prices[stock]);
	
				let notify = false;
				function activityNotification(str) {
					if (D(stock + "-percent").style.backgroundColor == "") {
						if (active(D('soundButton'))) {
							if (curPrice > 0) D('audio').play();
							else D('audiodown').play();
						}
						if (active(D('notificationButton'))) new Notification(stock + "'s " + str + " activity is elevated.");
					}
					notify = true;
				}

				if (avgPrice > 0 && curPrice > 0 && (curPrice > 4*avgPrice || curPrice + 4*avgPrice < 0)) activityNotification("price");
				if (avgVol > 0 && curVol > 0  && (curVol > 4*avgVol || curVol + 4*avgVol < 0)) activityNotification("volume");
				if (notify) {
					if (curPrice > 0) D(stock + "-percent").style.backgroundColor = "#dfd";
					else D(stock + "-percent").style.backgroundColor = "#fdd";   
					console.log(stock + " activity:");
					if (curVol > avgVol) console.log(curVol + " > " + avgVol);
					if (curPrice > avgPrice) console.log(curPrice + " > " + avgPrice);
				} else D(stock + "-percent").style.backgroundColor = "";
			}
		});	
	} else {
		var e = new Date();
		D('msg').textContent = d.toLocaleTimeString() + " (Refresh failed: " +  e.toLocaleTimeString() + ")";
		D('msg2').textContent = d.toLocaleTimeString() + " (Refresh failed: " +  e.toLocaleTimeString() + ")";
	}
	}).catch(function(error) { 
		console.log(error); 	
		var e = new Date();
		D('msg').textContent = d.toLocaleTimeString() + " (Refresh failed: " +  e.toLocaleTimeString() + ")";
		D('msg2').textContent = d.toLocaleTimeString() + " (Refresh failed: " +  e.toLocaleTimeString() + ")";
	});	
	}
}
	
function submitTicker(elt, myQuery) {
	let query = 'https://query1.finance.yahoo.com/v7/finance/quote?symbols=' + D('tickerInput').value.replaceAll(" ", ",");	
	if (myQuery) query = 'https://query1.finance.yahoo.com/v7/finance/quote?symbols=' + myQuery.replaceAll(" ", ",");	
	fetch("https://ansyble.herokuapp.com/cors/", 
		{cache:'no-cache', headers: {'Target-URL': query }}).then(function(response) {
		return response.json();
	}).then(function(data) {
	
	if (data.quoteResponse.result.length > 0) {
	for (let i = data.quoteResponse.result.length - 1; i > -1; i--) {
		let buffer = data.quoteResponse.result[i];
		let stock = buffer.symbol;
	
		if (!tickerList.includes(stock)) {			
			tickerList.push(stock);

			let newli = make("li");
			newli.id = stock;
			newli.style.textAlign = "center";
			newli.style.position = "relative";
	
			let newTicker = make("a");
			newTicker.id = stock + "-percent";
			newTicker.style.marginTop = "10px";
			newTicker.style.paddingLeft = "10px";
			newTicker.style.paddingRight = "10px";
			newTicker.textContent = stock + " " + round(buffer.regularMarketChange) + " (" + round(buffer.regularMarketChangePercent, true) + "%)";
			if (buffer.regularMarketChangePercent > 0) newTicker.style.color = "#3b7";
			else if (buffer.regularMarketChangePercent < 0) newTicker.style.color = "#FF0000";
			newTicker.href = "https://finance.yahoo.com/quote/" + stock;
			newTicker.target = "_blank";
	
			let newTickerX = make("button");
			newTickerX.textContent = "X";
			newTickerX.style.position = "absolute";
			newTickerX.style.top = "15px";
			newTickerX.style.right = "0px";
			newTickerX.onclick = function() { 
				tickerList.splice(tickerList.indexOf(stock), 1); 
				remove(newli); 
				delete volumes[stock];
				delete prices[stock];
			};	
	
			let lowerBound = make("input");
			lowerBound.type = "text";							
			lowerBound.id = stock + "-lower";
			lowerBound.style.width = "80px";
			setInput(lowerBound, stock);
								       
			let lowerMargin = make("input");
			lowerMargin.type = "text";							
			lowerMargin.id = stock + "-lowerMargin";
			lowerMargin.style.width = "80px";
			setInput(lowerMargin, stock);
			lowerMargin.style.marginLeft = "10px";  	
									      
			let lowerPercent = make("input");
			lowerPercent.type = "text";
			lowerPercent.value = defaultLower;
			lowerPercent.id = stock + "-lowerPercent";
			lowerPercent.style.width = "60px";	
			setInput(lowerPercent, stock);
								       
			let upperBound = make("input");
			upperBound.type = "text";
			upperBound.id = stock + "-upper";
			upperBound.style.width = "80px";
			setInput(upperBound, stock);		
								       
			let upperMargin = make("input");
			upperMargin.type = "text";							     
			upperMargin.id = stock + "-upperMargin";
			upperMargin.style.width = "80px";
			setInput(upperMargin, stock);
			upperMargin.style.marginRight = "10px";  	
								       
			let upperPercent = make("input");
			upperPercent.type = "text";
			upperPercent.value = defaultUpper;
			upperPercent.id = stock + "-upperPercent";
			upperPercent.style.width = "60px";
			setInput(upperPercent, stock);	
	
			let current = make("div");
			current.textContent = round(buffer.regularMarketPrice * 1);
			current.id = stock + "-current";
			current.style.display = "inline-block";
			current.style.paddingLeft = "10px";  	
			current.style.paddingRight = "10px";  			      
										      
			let slider = make("input");
			slider.id = stock + "-slider";
			slider.autocomplete = "off";
			slider.style.flexGrow = "1";							      
			slider.type = "range";
			slider.min = 0;
			slider.max =100;
			slider.step = 1;
			slider.value = 50;
			slider.style.marginLeft = "10px";
			slider.style.marginRight = "10px";
			slider.style.cursor = "pointer";
			slider.style.touchAction = "none";
			slider.oninput = function() {  updateDisplay(stock, slider); };
								
	
			let li1 = make('div');	    
			li1.appendChild(newTicker);
			li1.appendChild(newTickerX);
										      
			let li2 = make('div');	
			
			let parenth1 = make("span");
			parenth1.textContent = "(";
			li2.appendChild(parenth1);	
			li2.appendChild(lowerPercent);			      
			let percentsign1 = make("span");
			percentsign1.textContent = " %)";
			li2.appendChild(percentsign1);
							
			li2.appendChild(lowerMargin);
			li2.appendChild(current);
			li2.appendChild(upperMargin);
							
			let parenth2 = make("span");
			parenth2.textContent = "(";
			li2.appendChild(parenth2);				      
			li2.appendChild(upperPercent);									      
			let percentsign2 = make("span");
			percentsign2.textContent = " %)";	   
			li2.appendChild(percentsign2);	      
											      
			let li3 = make('div');	
			li3.style.display = "flex";
			li3.appendChild(lowerBound);
			li3.appendChild(slider);	
			li3.appendChild(upperBound);			      
										      
			newli.appendChild(li1);		
			newli.appendChild(li2);		
			newli.appendChild(li3);	
										      
			if (elt) { elt.appendChild(newli); }
			else D('stocklist').insertBefore(newli, D('stocklist').firstChild);
										       
			updateDisplay(stock, upperPercent);
			volumes[stock] = [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];
			prices[stock] = [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];
										       
		} else {
			if (elt) { elt.appendChild(D(stock)); }
			else D('stocklist').insertBefore(D(stock), D('stocklist').firstChild);
		}
		
		let price = buffer.regularMarketPrice;
		let dailyPercent = buffer.regularMarketChangePercent;
		let daily = buffer.regularMarketChange;
		D(stock + "-current").textContent = round(price);	
		D(stock + "-percent").textContent = stock + " " + round(daily) + " (" + round(dailyPercent, true) + "%)";

		if (dailyPercent > 0) D(stock + "-percent").style.color = "#3b7";
		else if (dailyPercent < 0) D(stock + "-percent").style.color = "#F00";
		else D(stock + "-percent").style.color = "#333";
	
		D('tickerInput').value = "";
	}
	} else D('msg2').textContent = "Ticker not found.";
	}).catch(function(error) { 
		console.log(error); 
		var e = new Date();
		D('msg').textContent = d.toLocaleTimeString() + " (Refresh failed: " +  e.toLocaleTimeString() + ")";
		D('msg2').textContent = d.toLocaleTimeString() + " (Refresh failed: " +  e.toLocaleTimeString() + ")";
	});	
}
								       
								       
function addAll(dataset) {
	submitTicker(null, dataset.join());
}
	
function updateAll() {
	d = new Date();
	D('msg').textContent = d.toLocaleTimeString();
	D('msg2').textContent = d.toLocaleTimeString();
	updateStocktwits();
	updateYolo();
	updateFinvizG();
	updateFinvizL();
	setTimeout(function() { updateFinvizV(); }, 400);
	updateWSB();
	updateEarnings();
	updateOptions();
}

function setInput(elt, stock) {
	elt.style.textAlign = "center";	
	elt.onkeydown = function() { 
		if ((event.keyCode > 57 && event.keyCode < 91) && !event.altKey && !event.ctrlKey) event.preventDefault();
	}
	elt.onkeyup = function() {
		if (event.keyCode == 13) {
			event.preventDefault(); 
			elt.blur();
		}
	};   
	if (stock) elt.onblur = function() { updateDisplay(stock, elt); };   
} 
function deactivate(but, str) { 
	but.classList.remove("active");
	but.textContent = str;
}										       
function activate(but, str) { 
	but.classList.add("active");
	but.textContent = str;
}
function active(but) { return but.classList.contains("active"); }
function round(num, percent) { 
	if (num < 1 && !percent) return Math.round(num*1000)/1000;
	return Math.round(num*100)/100;
}
function D(string) { return document.getElementById(string);}
function make(string) { return document.createElement(string);}	
function remove(element) { element.parentNode.removeChild(element);}

var weeklys = ["AA","AAL","AAOI","AAPL","ABBV","ABC","ABNB","ABT","ACAD","ACB","ACN","ADBE","ADI","ADM","ADP","ADS","ADSK","AEO","AFL","AG","AGNC","AIG","AKAM","ALGN","AMAT","AMBA","AMC","AMD","AMGN","AMRN","AMRS","AMT","AMZN","ANET","ANF","ANTM","APA","APO","APPH","APPS","APT","ARVL","ASML","ATOS","ATVI","AUY","AVGO","AVXL","AXP","AZN","AZO","BA","BABA","BAC","BAX","BB","BBBY","BBY","BDX","BHC","BIDU","BIIB","BILI","BK","BKNG","BLK","BLNK","BMY","BNTX","BP","BSX","BUD","BURL","BX","BYND","C","CAG","CAH","CAT","CBOE","CC","CCIV","CCJ","CCL","CF","CGC","CHPT","CHTR","CHWY","CI","CIEN","CL","CLDR","CLF","CLOV","CLR","CLVS","CLX","CMCSA","CME","CMG","CNC","CNP","CODX","COF","COG","COIN","COP","COST","COTY","COUP","CPB","CPRI","CREE","CRM","CRON","CRSP","CRWD","CSCO","CSIQ","CSTM","CSX","CTSH","CTXS","CVNA","CVS","CVX","CWH","CYBR","CYH","CYRX","CZR","DAL","DASH","DB","DBX","DD","DDD","DDOG","DE","DFS","DG","DHI","DIDI","DIS","DISH","DKNG","DKS","DLTR","DOCU","DOW","DPZ","DVN","EA","EBAY","ED","EDIT","EGHT","EMR","ENDP","ENPH","EOG","EPD","ET","ETN","ETSY","EW","EXAS","EXPE","EXPR","F","FB","FCEL","FCX","FDX","FEYE","FFIV","FISV","FIVE","FL","FLEX","FLR","FOSL","FOXA","FSLR","FSLY","FSR","FUBO","FUTU","GD","GE","GILD","GLW","GM","GME","GNUS","GNW","GOEV","GOLD","GOOG","GOOGL","GOOS","GP","GPRO","GPS","GRPN","GRWG","GS","GSK","GT","HAL","HAS","HBI","HCA","HD","HES","HFC","HIG","HIMX","HL","HLF","HOG","HON","HPE","HPQ","HRL","HSBC","HSY","HUM","HUYA","HYLN","IBM","IFF","ILMN","INFN","INO","INTC","INTU","IP","IQ","IRBT","ISRG","ITW","IVR","JCI","JD","JMIA","JNJ","JNPR","JPM","JWN","KEY","KGC","KHC","KKR","KLAC","KMB","KMI","KMX","KO","KODK","KR","KSS","KSU","LAZR","LB","LBTYK","LEN","LI","LITE","LL","LLNW","LLY","LMND","LMT","LNG","LOW","LRCX","LULU","LUMN","LUV","LVS","LYFT","M","MA","MAR","MARA","MAT","MCD","MCHP","MCK","MDB","MDLZ","MDT","MELI","MET","MGM","MMM","MNKD","MNST","MO","MOMO","MOS","MPC","MRK","MRNA","MRO","MRVL","MS","MSFT","MSTR","MT","MTCH","MU","MVIS","NBEV","NCLH","NEM","NET","NFLX","NIO","NKE","NKLA","NKTR","NLY","NNOX","NOC","NOK","NOV","NOW","NSC","NTAP","NTES","NTNX","NTR","NUE","NVAX","NVDA","NXPI","OCGN","OKE","OKTA","OLED","OLN","ON","OPK","ORCL","OSTK","OXY","PAA","PANW","PBR","PCG","PDD","PENN","PEP","PFE","PG","PHM","PINS","PLAY","PLTR","PLUG","PM","PNC","PPG","PSAC","PSTH","PSX","PSXP","PTON","PXD","PYPL","PZZA","QCOM","QDEL","QS","RACE","RAD","RBLX","RCL","REGN","RH","RIDE","RIG","RIOT","RKT","RMO","RNG","ROKU","ROST","RRC","RTX","RVLV","SABR","SBUX","SCHW","SDC","SE","SEAS","SFIX","SHAK","SHOP","SIG","SIRI","SKLZ","SKX","SLB","SNAP","SNDL","SNOW","SNPS","SO","SOFI","SOL","SOLO","SONO","SONY","SOS","SPCE","SPGI","SPLK","SPOT","SPWR","SQ","SRNE","SRPT","SSYS","STEM","STMP","STNE","STX","STZ","SU","SWK","SWKS","SWN","SYF","SYY","T","TAP","TDOC","TEAM","TECK","TEVA","TGT","THC","TJX","TLRY","TME","TMUS","TNDM","TOL","TPR","TRIP","TSCO","TSLA","TSM","TSN","TTD","TTM","TTWO","TWLO","TWTR","TXN","UA","UAA","UAL","UBER","ULTA","UNH","UNP","UPS","UPST","URBN","URI","USB","V","VALE","VFC","VIAC","VIPS","VIR","VLO","VMW","VOD","VRTX","VTRS","VXRT","VZ","W","WB","WBA","WDAY","WDC","WFC","WHR","WISH","WKHS","WMB","WMT","WOOF","WORK","WPM","WW","WY","WYNN","X","XLNX","XOM","XPEV","YELP","YETI","YNDX","YPF","YUM","YY","Z","ZM","ZNGA","ZS"];
	
	
var monthlys = ["A","AAIC","AAN","AAON","AAP","AAT","AAU","AAWW","AB","ABB","ABCB","ABCL","ABEO","ABEV","ABG","ABIO","ABM","ABMD","ABR","ABST","ABTX","ABUS","ACA","ACC","ACCD","ACCO","ACEL","ACER","ACET","ACEV","ACGL","ACH","ACHC","ACI","ACIC","ACIU","ACIW","ACLS","ACM","ACMR","ACOR","ACR","ACRE","ACRS","ACRX","ACTG","ACVA","ACWI","ADAP","ADC","ADCT","ADMA","ADMP","ADMS","ADN","ADNT","ADPT","ADT","ADTN","ADTX","ADUS","ADV","ADVM","AEE","AEG","AEIS","AEL","AEM","AEMD","AEP","AER","AERI","AES","AEVA","AEZS","AFG","AFI","AFIB","AFIN","AFMD","AFRM","AFYA","AGC","AGCB","AGCO","AGEN","AGFS","AGG","AGI","AGIO","AGL","AGLE","AGM","AGO","AGR","AGRO","AGRX","AGS","AGTC","AGX","AGYS","AGZ","AHCO","AHH","AHT","AI","AIMC","AIN","AINV","AIR","AIRC","AIRG","AIT","AIV","AIZ","AJAX","AJG","AJRD","AJX","AKBA","AKR","AKRO","AKTS","AL","ALB","ALBO","ALC","ALDX","ALE","ALEC","ALEX","ALG","ALGM","ALGT","ALHC","ALIT","ALK","ALKS","ALL","ALLE","ALLK","ALLO","ALLT","ALLY","ALNY","ALPN","ALRM","ALSK","ALSN","ALT","ALTG","ALTO","ALTR","ALTU","ALV","ALVR","ALXN","ALXO","AM","AMBC","AMCR","AMCX","AME","AMED","AMEH","AMG","AMH","AMKR","AMN","AMNB","AMOT","AMP","AMPE","AMPH","AMPY","AMR","AMRC","AMRX","AMSC","AMSF","AMSWA","AMTI","AMTX","AMWD","AMWL","AMX","AMZA","AN","ANAB","ANAT","ANDE","ANGI","ANGO","ANIK","ANIP","ANIX","ANSS","ANTE","AON","AOS","AOSL","AOUT","AP","APAM","APD","APEI","APEN","APG","APH","API","APLE","APLS","APLT","APOG","APP","APPF","APPN","APRE","APRN","APTO","APTS","APTV","APTX","APYX","AQB","AQMS","AQN","AQST","AQUA","AR","ARAV","ARAY","ARC","ARCB","ARCC","ARCH","ARCO","ARCT","ARD","ARDX","ARE","AREC","ARES","ARGX","ARI","ARKO","ARLO","ARLP","ARMK","ARNA","ARNC","AROC","AROW","ARQT","ARR","ARRY","ARVN","ARW","ARWR","ASA","ASAI","ASAN","ASB","ASC","ASGN","ASH","ASIX","ASLN","ASMB","ASND","ASO","ASPN","ASPS","ASPU","ASR","ASRT","ASRV","ASTE","ASTR","ASTS","ASUR","ASXC","ASYS","ATAI","ATAX","ATCO","ATEC","ATEN","ATER","ATEX","ATGE","ATH","ATHA","ATHM","ATHX","ATI","ATIP","ATKR","ATLC","ATNF","ATNI","ATNM","ATNX","ATO","ATOM","ATR","ATRA","ATRC","ATRO","ATRS","ATSG","ATUS","AU","AUB","AUD","AUDC","AUMN","AUPH","AUTO","AVA","AVAH","AVAV","AVB","AVCT","AVD","AVDL","AVEO","AVID","AVIR","AVLR","AVNS","AVNT","AVNW","AVO","AVPT","AVRO","AVT","AVTR","AVY","AVYA","AWH","AWI","AWK","AWR","AWRE","AX","AXAS","AXDX","AXGN","AXL","AXLA","AXNX","AXON","AXS","AXSM","AXTA","AXTI","AXU","AY","AYI","AYRO","AYTU","AYX","AZEK","AZPN","AZUL","AZZ","B","BAH","BALY","BAM","BANC","BAND","BANF","BANR","BAP","BARK","BATRA","BATRK","BBAR","BBD","BBDC","BBH","BBIG","BBIO","BBL","BBSI","BBU","BBVA","BBW","BC","BCAB","BCBP","BCC","BCDA","BCE","BCEI","BCEL","BCLI","BCO","BCOR","BCOV","BCPC","BCRX","BCS","BCSF","BDC","BDN","BDSI","BDSX","BDTX","BE","BEAM","BECN","BEEM","BEKE","BELFB","BEN","BEP","BEPC","BERY","BEST","BF.A","BF.B","BFAM","BFI","BFLY","BG","BGCP","BGFV","BGNE","BGS","BHE","BHF","BHLB","BHP","BHR","BHVN","BIG","BIGC","BILL","BIO","BIOC","BIOX","BIP","BIPC","BITF","BJ","BJRI","BKCC","BKD","BKE","BKEP","BKH","BKI","BKR","BKU","BKYI","BL","BLD","BLDE","BLDP","BLDR","BLFS","BLI","BLKB","BLL","BLMN","BLRX","BLU","BLUE","BLX","BMA","BMBL","BMI","BMO","BMRA","BMRN","BMTC","BMTX","BNED","BNFT","BNGO","BNL","BNS","BNTC","BOCH","BODY","BOH","BOKF","BOOM","BOOT","BOWX","BOX","BPMC","BPMP","BPOP","BPT","BPY","BPYU","BQ","BR","BRBR","BRC","BREZ","BRFS","BRG","BRK.B","BRKL","BRKR","BRKS","BRMK","BRO","BRP","BRSP","BRX","BRY","BSAC","BSBR","BSET","BSGM","BSIG","BSM","BSMX","BSQR","BSRR","BSY","BTAI","BTAQ","BTBT","BTCM","BTE","BTG","BTI","BTN","BTNB","BTRS","BTU","BTWN","BUR","BUSE","BV","BVN","BW","BWA","BWAC","BWEN","BWX","BWXT","BXC","BXMT","BXP","BXRX","BXS","BYD","BYSI","BZH","BZUN","CAAP","CAAS","CABA","CAC","CACC","CACI","CADE","CAE","CAI","CAJ","CAKE","CAL","CALA","CALM","CALX","CAMP","CAMT","CAN","CANO","CAP","CAPL","CAPR","CAR","CARA","CARG","CARR","CARS","CASA","CASH","CASS","CASY","CATB","CATO","CATY","CB","CBAT","CBAY","CBB","CBD","CBIO","CBLI","CBRE","CBRL","CBSH","CBT","CBU","CBZ","CCAC","CCCC","CCEP","CCI","CCK","CCLP","CCMP","CCNE","CCO","CCOI","CCRN","CCS","CCV","CCXI","CD","CDAY","CDE","CDEV","CDK","CDLX","CDMO","CDNA","CDNS","CDR","CDTX","CDW","CDXC","CDXS","CDZI","CE","CECE","CEIX","CELH","CELJF","CEMI","CENT","CENTA","CENX","CEQP","CERC","CERE","CERN","CERS","CERT","CEVA","CFAC","CFB","CFFN","CFG","CFLT","CFR","CFRX","CFX","CG","CGAU","CGBD","CGEN","CGNT","CGNX","CGRN","CHCO","CHD","CHDN","CHE","CHEF","CHGG","CHH","CHK","CHKP","CHL","CHMA","CHNG","CHRA","CHRS","CHRW","CHS","CHT","CHU","CHUY","CHX","CIA","CIB","CIG","CIGI","CIM","CINF","CIO","CIR","CIT","CIVB","CIXX","CKPT","CLAR","CLB","CLBK","CLBS","CLDT","CLDX","CLFD","CLH","CLI","CLIR","CLLS","CLMT","CLNE","CLPS","CLPT","CLS","CLSD","CLSK","CLSN","CLVR","CLVT","CLW","CLXT","CM","CMA","CMC","CMCM","CMCO","CMI","CMLF","CMO","CMP","CMPR","CMPS","CMRE","CMRX","CMS","CMTL","CNA","CNCE","CNDT","CNET","CNHI","CNI","CNK","CNMD","CNNE","CNO","CNOB","CNQ","CNR","CNS","CNSL","CNTY","CNX","CNXC","CNXN","CO","CODI","COGT","COHR","COHU","COLB","COLD","COLL","COLM","COMM","COMP","COMS","CONE","CONN","CONX","COO","COOP","COR","CORE","CORR","CORT","COUR","COWN","CP","CPA","CPE","CPF","CPG","CPK","CPLG","CPLP","CPNG","CPPRQ","CPRT","CPRX","CPS","CPSH","CPSI","CPSS","CPT","CPUH","CQP","CR","CRAI","CRBP","CRC","CRD.A","CRDF","CRESY","CRH","CRHC","CRI","CRIS","CRK","CRL","CRMD","CRMT","CRNC","CRNT","CROX","CRS","CRSR","CRTO","CRTX","CRU","CRUS","CRVL","CRVS","CRWS","CRY","CS","CSAN","CSBR","CSGP","CSGS","CSII","CSL","CSLT","CSOD","CSPR","CSR","CSTE","CSTL","CSV","CSWC","CTAS","CTBI","CTG","CTIC","CTLP","CTLT","CTMX","CTOS","CTRE","CTRM","CTRN","CTS","CTSO","CTST","CTT","CTVA","CTXR","CUBE","CUBI","CUE","CUK","CULP","CURI","CURO","CUTR","CUZ","CVA","CVAC","CVBF","CVCO","CVCY","CVE","CVEO","CVET","CVGI","CVGW","CVI","CVLG","CVLT","CVM","CW","CWCO","CWEN","CWK","CWST","CWT","CX","CXDC","CXM","CXP","CXW","CYBE","CYCC","CYCN","CYD","CYTK","CZNC","D","DAC","DADA","DAKT","DALN","DAN","DAO","DAR","DBA","DBB","DBC","DBD","DBI","DBRG","DBV","DBVT","DCBO","DCI","DCO","DCOM","DCP","DCPH","DCRB","DCRC","DCT","DDS","DEA","DECK","DEH","DEI","DELL","DEM","DEN","DENN","DEO","DESP","DFH","DFIN","DGICA","DGII","DGLY","DGNR","DGNS","DGX","DHC","DHR","DHT","DHX","DIA","DIN","DIOD","DISCA","DISCK","DK","DKL","DLB","DLHC","DLNG","DLO","DLR","DLTH","DLX","DM","DMAC","DMLP","DMRC","DMTK","DMYI","DNB","DNLI","DNMR","DNN","DNOW","DNUT","DOC","DOCN","DOCS","DOFSQ","DOMO","DOOO","DOOR","DORM","DOV","DOX","DOYU","DPW","DQ","DRD","DRE","DRH","DRI","DRIO","DRNA","DRQ","DRRX","DRVN","DS","DSEY","DSGX","DSKE","DSPG","DSX","DT","DTE","DTEA","DTIL","DUK","DV","DVA","DVAX","DVY","DX","DXC","DXCM","DXPE","DXYN","DY","DYAI","DYN","DZSI","E","EAF","EAR","EARS","EAT","EB","EBC","EBF","EBIX","EBON","EBS","EBSB","EC","ECH","ECHO","ECL","ECOL","ECOM","ECPG","EDAP","EDR","EDU","EEFT","EEM","EEX","EFA","EFC","EFSC","EFX","EGAN","EGBN","EGLX","EGO","EGP","EGRX","EGY","EH","EHC","EHTH","EIG","EIGR","EIX","EKSO","EL","ELAN","ELDN","ELF","ELMD","ELMS","ELOX","ELP","ELS","ELVT","ELY","ELYS","EMAN","EMB","EME","EMKR","EMN","EMX","ENB","ENBL","ENG","ENIA","ENIC","ENLC","ENLV","ENOB","ENR","ENS","ENSG","ENTA","ENTG","ENTX","ENV","ENVA","ENVX","ENZ","EOLS","EOSE","EPAC","EPAM","EPAY","EPC","EPHY","EPM","EPP","EPR","EPRT","EPZM","EQ","EQC","EQH","EQIX","EQNR","EQOS","EQR","EQT","EQX","ERF","ERIC","ERIE","ERII","ERJ","ES","ESCA","ESE","ESGC","ESI","ESNT","ESPR","ESRT","ESS","ESSC","ESTA","ESTC","ESTE","ETH","ETNB","ETON","ETR","ETRN","ETWO","EURN","EVA","EVBG","EVC","EVER","EVFM","EVGN","EVGO","EVH","EVLO","EVOK","EVOP","EVR","EVRG","EVRI","EVTC","EWA","EWBC","EWD","EWG","EWH","EWI","EWJ","EWL","EWM","EWP","EWQ","EWS","EWU","EWY","EWZ","EXC","EXEL","EXK","EXLS","EXP","EXPD","EXPI","EXPO","EXR","EXTN","EXTR","EYE","EYEN","EYES","EYPT","EZA","EZPW","EZU","FAF","FANG","FANH","FARM","FARO","FAS","FAST","FATE","FAZ","FBC","FBHS","FBIO","FBIZ","FBK","FBNC","FBP","FBRX","FC","FCBC","FCF","FCFS","FCN","FCPT","FCRD","FDMT","FDN","FDP","FDS","FDUS","FE","FELE","FENC","FENG","FF","FFBC","FFIC","FFIN","FFNW","FGEN","FGNA","FHB","FHI","FHN","FI","FIBK","FICO","FIGS","FINV","FIS","FISI","FIT","FITB","FIVN","FIX","FIXX","FIZZ","FLDM","FLGT","FLIC","FLL","FLMN","FLNT","FLO","FLOW","FLS","FLT","FLUX","FLWS","FLXN","FLY","FMAC","FMBI","FMC","FMNB","FMS","FMTX","FMX","FN","FNB","FND","FNF","FNHC","FNKO","FNLC","FNV","FOA","FOCS","FOE","FOLD","FOR","FORM","FORR","FOUR","FOX","FOXF","FPAC","FPH","FPI","FR","FRBK","FRC","FREE","FREQ","FRG","FRGI","FRHC","FRME","FRO","FROG","FRPT","FRSX","FRT","FRTA","FSK","FSM","FSP","FSS","FST","FSTR","FSTX","FSV","FTAI","FTCH","FTCV","FTDR","FTEK","FTFT","FTI","FTK","FTNT","FTRCQ","FTS","FTV","FUL","FULT","FUN","FUSE","FUSN","FUV","FVE","FVRR","FWONA","FWONK","FWRD","FXI","FYBR","G","GABC","GAIA","GAIN","GALT","GAN","GASS","GATO","GATX","GAU","GB","GBCI","GBDC","GBIO","GBOX","GBT","GBX","GCI","GCO","GCP","GDDY","GDEN","GDOT","GDRX","GDS","GDYN","GEF","GEL","GENE","GENI","GENN","GEO","GEOS","GERN","GES","GEVO","GFF","GFI","GFL","GGAL","GGB","GGG","GH","GHL","GHM","GHVI","GIB","GIC","GIFI","GIII","GIL","GILT","GIS","GKOS","GL","GLAD","GLBS","GLD","GLDD","GLMD","GLNG","GLOB","GLOP","GLP","GLPG","GLPI","GLRE","GLT","GLYC","GMAB","GMBL","GMDA","GMED","GMF","GMRE","GMS","GMTX","GNCA","GNE","GNK","GNL","GNLN","GNOG","GNPK","GNPX","GNRC","GNRS","GNSS","GNTX","GO","GOCO","GOED","GOGL","GOGO","GOL","GOLF","GOOD","GORO","GOSS","GOTU","GPC","GPI","GPK","GPL","GPMT","GPN","GPOR","GPP","GPRE","GPRK","GPX","GRA","GRAY","GRBK","GRC","GRFS","GRMN","GROW","GROY","GRSV","GRTS","GRUB","GSAH","GSAT","GSBC","GSG","GSHD","GSIT","GSKY","GSM","GSS","GTBP","GTE","GTES","GTHX","GTIM","GTLS","GTN","GTS","GTTN","GTX","GTY","GTYH","GVA","GWAC","GWB","GWRE","GWRS","GWW","GXGX","H","HA","HAAC","HAE","HAFC","HAIN","HALL","HALO","HARP","HASI","HAYN","HAYW","HBAN","HBIO","HBM","HBNC","HBP","HCAT","HCC","HCCI","HCHC","HCI","HCKT","HCM","HCSG","HDB","HDSN","HE","HEAR","HEES","HEI","HEI.A","HELE","HEP","HEPA","HESM","HEXO","HFWA","HGEN","HGV","HHC","HI","HIBB","HII","HIL","HIMS","HITI","HIW","HJLI","HLI","HLIO","HLIT","HLMN","HLNE","HLT","HLX","HMC","HMHC","HMN","HMST","HMTV","HMY","HNGR","HNI","HNP","HNST","HOFT","HOFV","HOLI","HOLX","HOMB","HOME","HONE","HOOK","HOPE","HP","HPP","HQY","HR","HRB","HRC","HRI","HRMY","HROW","HRTG","HRTX","HRZN","HSC","HSIC","HSII","HSKA","HST","HSTM","HT","HTA","HTBI","HTBK","HTBX","HTGC","HTH","HTHT","HTLD","HTLF","HTOO","HUBB","HUBG","HUBS","HUGE","HUN","HURN","HUT","HVT","HWC","HWKN","HWM","HXL","HY","HYFM","HYG","HYMC","HYRE","HZN","HZNP","HZO","HZON","IAA","IAC","IAG","IART","IAU","IBB","IBCP","IBIO","IBKR","IBN","IBOC","IBP","IBRX","IBTX","ICAD","ICE","ICF","ICFI","ICHR","ICLK","ICLR","ICMB","ICON","ICPT","ICUI","IDA","IDCC","IDEX","IDN","IDRA","IDT","IDV","IDXX","IDYA","IEA","IEC","IEF","IEP","IEX","IFN","IFRX","IGAC","IGC","IGE","IGIB","IGMS","IGSB","IGT","IHRT","III","IIIN","IIIV","IIN","IIPR","IIVI","IJH","IJJ","IJK","IJR","IJS","IJT","ILF","ILPT","IMAB","IMAX","IMBI","IMGN","IMH","IMKTA","IMMP","IMMR","IMNM","IMO","IMOS","IMTX","IMUX","IMV","IMVT","INCY","INDB","INDI","INFI","INFO","INFU","INFY","ING","INGN","INGR","INMB","INMD","INN","INOD","INOV","INSE","INSG","INSM","INSP","INSW","INT","INTEQ","INTZ","INVA","INVE","INVH","INVZ","IO","IONS","IOSP","IOVA","IPA","IPAR","IPG","IPGP","IPI","IPOD","IPOF","IQV","IR","IRDM","IRIX","IRM","IRT","IRTC","IRWD","IS","ISBC","ISEE","ISIG","ISUN","IT","ITCI","ITGR","ITI","ITP","ITRI","ITRN","ITT","ITUB","IVAC","IVC","IVV","IVZ","IWD","IWF","IWM","IWN","IWO","IWP","IWR","IWS","IYE","IYR","IYW","IZEA","J","JACK","JAGX","JAMF","JAX","JAZZ","JBGS","JBHT","JBI","JBL","JBLU","JBSS","JBT","JCOM","JEF","JELD","JFIN","JG","JHG","JJSF","JKHY","JKS","JLL","JMP","JNCE","JNK","JOAN","JOBS","JOE","JP","JRVR","JW.A","JYNT","K","KAI","KALA","KALU","KALV","KAMN","KAR","KB","KBAL","KBH","KBNT","KBR","KC","KCAC","KDMN","KDNY","KDP","KE","KELYA","KEP","KERN","KEX","KEYS","KFRC","KFY","KIDS","KIM","KIN","KIRK","KL","KLDO","KLIC","KLR","KMDA","KMPH","KMPR","KMT","KN","KNBE","KNDI","KNL","KNOP","KNSA","KNSL","KNX","KOD","KOF","KOP","KOPN","KOS","KPLT","KPTI","KRA","KRC","KREF","KRG","KRMD","KRNT","KRNY","KRO","KRON","KRP","KRTX","KRYS","KT","KTB","KTCC","KTOS","KURA","KVHI","KW","KWR","KYMR","KZIA","KZR","L","LAC","LAD","LADR","LAKE","LAMR","LANC","LAND","LASR","LAUR","LAZ","LBAI","LBRDA","LBRDK","LBRT","LBTYA","LC","LCA","LCI","LCII","LCNB","LCTX","LCUT","LDL","LDOS","LE","LEA","LEAP","LECO","LEE","LEG","LEGH","LEGN","LEJU","LESL","LEU","LEV","LEVI","LFC","LFMD","LFST","LFT","LFTR","LFUS","LFVN","LGF.A","LGF.B","LGHL","LGIH","LGND","LH","LHCG","LHDX","LHX","LIFE","LII","LILA","LILAK","LIN","LINC","LIND","LIVN","LIVX","LIZI","LJPC","LKFN","LKNCY","LKQ","LMACA","LMAT","LMNL","LMNR","LMRK","LNC","LNDC","LNN","LNT","LNTH","LOB","LOCO","LODE","LOGC","LOGI","LOMA","LOOP","LOPE","LORL","LOTZ","LOV","LOVE","LPCN","LPG","LPI","LPL","LPLA","LPRO","LPSN","LPX","LQD","LQDA","LQDT","LRMR","LRN","LSCC","LSI","LSPD","LSTR","LSXMA","LSXMK","LTC","LTCH","LTHM","LTPZ","LTRN","LTRPA","LU","LUNA","LUNG","LUXA","LVOX","LW","LX","LXFR","LXP","LXRX","LXU","LYB","LYG","LYTS","LYV","LZ","LZB","MAA","MAC","MACK","MAG","MAGS","MAIN","MAN","MANH","MANT","MANU","MAPS","MARK","MAS","MASI","MATW","MATX","MAX","MAXN","MAXR","MBB","MBI","MBIO","MBT","MBUU","MBWM","MC","MCBC","MCF","MCFE","MCFT","MCMJ","MCO","MCRB","MCRI","MCS","MCY","MD","MDC","MDCA","MDGL","MDLA","MDP","MDRX","MDU","MDXG","ME","MED","MEDP","MEG","MEI","MEIP","MEOH","MERC","MESA","MESO","MFA","MFC","MFG","MFGP","MFH","MFIN","MG","MGA","MGEE","MGI","MGIC","MGLN","MGNI","MGNX","MGP","MGPI","MGRC","MGTA","MGTX","MGY","MHK","MHLD","MHO","MIC","MIDD","MILE","MIME","MIND","MIST","MITK","MITT","MIXT","MKC","MKFG","MKL","MKSI","MKTX","MLCO","MLHR","MLI","MLM","MLNTQ","MLR","MLSS","MMAT","MMC","MMI","MMLP","MMP","MMS","MMSI","MMX","MMYT","MN","MNDY","MNKKQ","MNMD","MNOV","MNR","MNRL","MNRO","MNSO","MNTV","MNTX","MOD","MODN","MODV","MOG.A","MOGO","MOH","MORN","MOV","MOXC","MP","MPAA","MPLN","MPLX","MPW","MPWR","MPX","MQ","MRC","MRCC","MRCY","MREO","MRIN","MRKR","MRLN","MRNS","MRSN","MRTN","MRTX","MRVI","MSA","MSB","MSCI","MSEX","MSGE","MSGS","MSI","MSM","MSON","MSP","MTA","MTB","MTD","MTDR","MTEM","MTG","MTH","MTL","MTLS","MTN","MTOR","MTRN","MTRX","MTSI","MTW","MTX","MTZ","MUB","MUDS","MUFG","MUR","MUSA","MUX","MVO","MWA","MX","MXIM","MXL","MYE","MYGN","MYMD","MYOV","MYPS","MYRG","NAK","NAPA","NARI","NAT","NATI","NAUT","NAVB","NAVI","NBHC","NBIX","NBR","NBRV","NBSE","NBTB","NCMI","NCNO","NCR","NCTY","NDAQ","NDLS","NDSN","NEBC","NEE","NEGG","NEO","NEOG","NEP","NEPT","NERV","NESR","NEU","NEW","NEWR","NEWT","NEX","NEXA","NEXT","NFBK","NFE","NFG","NG","NGAC","NGD","NGG","NGL","NGM","NGS","NGVC","NGVT","NH","NHC","NHI","NHIC","NHTC","NI","NICE","NINE","NIU","NJR","NKTX","NL","NLOK","NLS","NLSN","NLTX","NM","NMFC","NMG","NMIH","NMM","NMR","NMRD","NMRK","NMTR","NNA","NNBR","NNDM","NNI","NNN","NNVC","NOA","NOAH","NOG","NOMD","NOVA","NOVN","NOVT","NP","NPO","NPTN","NR","NRBO","NRG","NRIX","NRP","NRT","NRZ","NS","NSA","NSH","NSIT","NSP","NSPR","NSSC","NSTB","NSTG","NTCO","NTCT","NTGR","NTLA","NTP","NTRA","NTRS","NTUS","NTWK","NUAN","NUS","NUVA","NUVB","NVCR","NVEE","NVGS","NVMI","NVO","NVRO","NVS","NVST","NVT","NVTA","NVVE","NWBI","NWE","NWG","NWL","NWN","NWPX","NWS","NWSA","NX","NXE","NXGN","NXRT","NXST","NXTC","NXTD","NYCB","NYMT","NYMX","NYT","O","OAS","OBLG","OBSV","OC","OCDX","OCFC","OCFT","OCN","OCSL","OCUL","OCUP","OCX","ODFL","ODP","ODT","OEC","OEG","OESX","OFC","OFG","OFIX","OGE","OGI","OGS","OHI","OI","OIH","OII","OIS","OLLI","OLMA","OLO","OLP","OM","OMAB","OMC","OMCL","OMER","OMEX","OMF","OMI","OMP","ONB","ONCR","ONCS","ONCT","ONEM","ONTO","ONTX","OOMA","OPCH","OPEN","OPI","OPRA","OPRX","OPTN","OPTT","OPY","OR","ORA","ORAN","ORBC","ORC","ORCC","ORGN","ORGO","ORGS","ORI","ORIC","ORLA","ORLY","ORMP","ORN","ORPH","ORTX","OSBC","OSCR","OSG","OSH","OSIS","OSK","OSPN","OSS","OSUR","OSW","OTEX","OTIC","OTIS","OTLY","OTRK","OTTR","OUST","OUT","OVID","OVV","OWL","OWLT","OXM","OXSQ","OZK","OZON","PAAS","PACB","PACE","PACK","PACW","PAE","PAG","PAGP","PAGS","PAHC","PAM","PANL","PAR","PARR","PASG","PATH","PATK","PAVM","PAX","PAYA","PAYC","PAYO","PAYS","PAYX","PB","PBA","PBCT","PBF","PBFX","PBH","PBI","PBPB","PBR.A","PBT","PBYI","PCAR","PCH","PCOM","PCOR","PCRX","PCSB","PCT","PCTI","PCTY","PCVX","PCY","PCYG","PCYO","PD","PDAC","PDCE","PDCO","PDFS","PDLI","PDM","PDS","PDSB","PEAK","PEB","PEBO","PEG","PEGA","PEI","PEN","PEO","PERI","PESI","PETQ","PETS","PFBC","PFC","PFF","PFG","PFGC","PFLT","PFMT","PFPT","PFS","PFSI","PFSW","PGC","PGEN","PGNY","PGR","PGRE","PGTI","PGX","PH","PHAS","PHAT","PHG","PHIO","PHR","PHX","PI","PID","PII","PIN","PINC","PING","PIPP","PIPR","PIRS","PIXY","PJT","PK","PKE","PKG","PKI","PKOH","PKX","PLAB","PLAN","PLBY","PLCE","PLD","PLG","PLL","PLMR","PLNT","PLOW","PLRX","PLSE","PLTK","PLUS","PLX","PLXP","PLXS","PLYA","PMT","PMVP","PNFP","PNM","PNNT","PNR","PNTG","PNW","PODD","POLY","POOL","POR","POSH","POST","POWI","POWW","PPBI","PPBT","PPC","PPD","PPL","PQG","PRA","PRAA","PRAX","PRCH","PRDO","PRFT","PRG","PRGO","PRGS","PRI","PRIM","PRK","PRLB","PRMW","PRO","PROF","PROG","PRPB","PRPH","PRPL","PRPO","PRQR","PRSR","PRTA","PRTK","PRTS","PRTY","PRU","PRVB","PSA","PSB","PSEC","PSFE","PSMT","PSN","PSNL","PSO","PSP","PSTG","PSTI","PSTX","PTC","PTCT","PTE","PTEN","PTGX","PTMN","PTPI","PTR","PTRA","PTVE","PUBM","PUK","PUMP","PVAC","PVG","PVH","PVL","PWFL","PWP","PWR","PXLW","PYX","PZN","QADA","QCRH","QD","QELL","QFIN","QGEN","QIWI","QLGN","QLYS","QMCO","QNST","QQQ","QRHC","QRTEA","QRVO","QSI","QSR","QTNT","QTRX","QTS","QTT","QTWO","QUAD","QUIK","QUMU","QUOT","QURE","R","RAAC","RAAS","RADA","RADI","RAIL","RAMP","RAPT","RARE","RAVE","RAVN","RBA","RBAC","RBBN","RBC","RBCAA","RC","RCEL","RCI","RCII","RCKT","RCM","RCMT","RCON","RCUS","RDFN","RDHL","RDI","RDN","RDNT","RDS.A","RDS.B","RDUS","RDWR","RDY","RE","REAL","REDU","REED","REFR","REG","REGI","REI","REKR","RELL","RENN","REPH","REPL","RES","RESN","RETA","REV","REVG","REXR","REYN","REZI","RF","RFIL","RFL","RFP","RGA","RGEN","RGLD","RGLS","RGNX","RGP","RGR","RGS","RHI","RHP","RICE","RICK","RIGL","RILY","RIO","RJF","RKDA","RL","RLAY","RLGT","RLGY","RLI","RLJ","RLMD","RLX","RM","RMAX","RMBS","RMD","RMGB","RMNI","RMTI","RNLX","RNR","RNST","RNWK","ROAD","ROCK","ROG","ROIC","ROK","ROL","ROLL","ROOT","ROP","RPAI","RPAY","RPD","RPM","RPRX","RPT","RPTX","RRD","RRGB","RRR","RS","RSG","RSI","RSP","RTH","RTLR","RTP","RUBY","RUN","RUSHA","RUTH","RVMD","RVNC","RVP","RVPH","RVSB","RWLK","RWT","RWX","RXN","RXRX","RXT","RY","RYAAY","RYAM","RYB","RYI","RYN","RYTM","SA","SAFE","SAFM","SAFT","SAGE","SAH","SAIA","SAIC","SAII","SAIL","SAM","SAN","SANA","SAND","SANM","SANW","SAP","SASR","SATS","SAVA","SAVE","SB","SBAC","SBBP","SBCF","SBGI","SBH","SBLK","SBNY","SBRA","SBS","SBSI","SBSW","SC","SCCO","SCHL","SCHN","SCI","SCL","SCM","SCOR","SCPH","SCPL","SCR","SCS","SCSC","SCU","SCVL","SCWX","SCYX","SD","SDGR","SDY","SEAC","SEAH","SECO","SEDG","SEE","SEEL","SEER","SEIC","SELB","SEM","SENS","SESN","SF","SFBS","SFE","SFL","SFM","SFNC","SFT","SFTW","SGBX","SGC","SGEN","SGFY","SGH","SGLB","SGMO","SGMS","SGRY","SGU","SHC","SHCR","SHEN","SHLS","SHLX","SHO","SHOO","SHV","SHW","SHY","SHYF","SI","SIBN","SID","SIEB","SIEN","SIFY","SIGA","SIGI","SII","SILK","SILV","SIMO","SINO","SIOX","SITC","SITE","SIVB","SIX","SJI","SJM","SJR","SJT","SJW","SKIL","SKIN","SKM","SKT","SKY","SKYW","SLAB","SLCA","SLDB","SLF","SLG","SLGG","SLGL","SLGN","SLM","SLNO","SLP","SLQT","SLRC","SLS","SM","SMAR","SMBK","SMCI","SMED","SMFG","SMG","SMHI","SMMT","SMP","SMPL","SMSI","SMTC","SNA","SNBR","SNCR","SNCY","SND","SNDR","SNDX","SNEX","SNN","SNP","SNPR","SNR","SNV","SNX","SNY","SOAC","SOGO","SOHU","SOI","SON","SP","SPAL","SPAQ","SPB","SPFR","SPG","SPH","SPI","SPKE","SPNE","SPNS","SPNT","SPNV","SPOK","SPPI","SPR","SPRO","SPRT","SPSC","SPT","SPTN","SPWH","SPXC","SPY","SQM","SQSP","SQZ","SR","SRAC","SRAX","SRC","SRCE","SRCL","SRDX","SRE","SREV","SRG","SRGA","SRI","SRLP","SRNG","SRRK","SRT","SRTS","SSB","SSD","SSL","SSNC","SSP","SSRM","SSSS","SSTK","ST","STAA","STAG","STAR","STBA","STC","STCN","STE","STEP","STFC","STIM","STKL","STL","STLA","STLD","STM","STN","STNG","STOK","STON","STOR","STRA","STRL","STRO","STSA","STT","STWD","STXS","SUI","SUM","SUMO","SUN","SUNL","SUNS","SUNW","SUP","SUPN","SUPV","SURF","SVAC","SVC","SVFA","SVM","SVRA","SVVC","SWAV","SWBI","SWCH","SWI","SWIM","SWIR","SWM","SWTX","SWX","SXC","SXI","SXT","SY","SYBX","SYK","SYKE","SYNA","SYNH","SYNL","SYPR","SYRS","TA","TAC","TACO","TACT","TAK","TAL","TALK","TALO","TARA","TARO","TAST","TBBK","TBI","TBIO","TBK","TBLA","TBNK","TBPH","TCBI","TCBK","TCDA","TCMD","TCOM","TCON","TCPC","TCRR","TCS","TCX","TD","TDC","TDG","TDS","TDUP","TDW","TDY","TECH","TEF","TEL","TELL","TEN","TENB","TEO","TER","TEUM","TEX","TFC","TFFP","TFI","TFII","TFSL","TFX","TG","TGB","TGH","TGI","TGLS","TGNA","TGP","TGS","TGTX","TH","THCA","THCB","THD","THFF","THG","THO","THR","THRM","THRY","THS","TIGR","TILE","TIMB","TIP","TIPT","TISI","TITN","TIXT","TK","TKC","TKR","TLIS","TLMD","TLND","TLRDQ","TLS","TLSA","TLT","TLYS","TM","TMDX","TMHC","TMO","TMP","TMQ","TMST","TMX","TNC","TNET","TNK","TNL","TNP","TOUR","TOWN","TPB","TPC","TPGY","TPH","TPIC","TPST","TPTX","TPVG","TPX","TR","TRC","TREB","TREC","TREE","TREX","TRGP","TRHC","TRI","TRIB","TRIL","TRIT","TRMB","TRMK","TRN","TRNO","TROW","TROX","TRP","TRQ","TRS","TRST","TRTN","TRTX","TRU","TRUE","TRUP","TRV","TRVG","TRVN","TRX","TS","TSE","TSEM","TSLX","TSP","TSQ","TT","TTC","TTCF","TTE","TTEC","TTEK","TTGT","TTI","TTMI","TTNP","TTOO","TU","TUEM","TUFN","TUP","TUR","TURN","TUSK","TV","TVTX","TVTY","TW","TWCT","TWI","TWIN","TWNK","TWO","TWOU","TWST","TX","TXG","TXMD","TXRH","TXT","TYL","TYME","TZOO","U","UAMY","UAN","UAVS","UBA","UBS","UBSI","UBX","UCBI","UCTT","UDR","UE","UEC","UEIC","UEPS","UFCS","UFI","UFPI","UFS","UGI","UGP","UHAL","UHS","UHT","UI","UIHC","UIS","UL","ULBI","ULCC","UMBF","UMC","UMH","UMPQ","UNF","UNFI","UNIT","UNM","UNVR","UONEK","UP","UPH","UPLD","UPWK","URGN","USAC","USAK","USCR","USFD","USIO","USM","USNA","USO","USPH","USX","UTHR","UTI","UTL","UTSI","UTZ","UUUU","UVE","UVSP","UVV","UWMC","UXIN","VAC","VACQ","VAL","VAPO","VBIV","VBLT","VBTX","VC","VCEL","VCNX","VCRA","VCTR","VCVC","VCYT","VEC","VECO","VEDL","VEEV","VEL","VEON","VER","VERI","VERU","VERX","VET","VFF","VFH","VG","VGR","VGZ","VHC","VIACA","VIAV","VICI","VICR","VIEW","VIH","VIRT","VIRX","VISL","VITL","VIV","VIVO","VKTX","VLDR","VLRS","VLY","VMC","VMD","VMEO","VMI","VNDA","VNE","VNET","VNO","VNOM","VNQ","VNRX","VNT","VNTR","VOC","VOLT","VOXX","VOYA","VPG","VRA","VRAY","VRCA","VREX","VRM","VRNA","VRNS","VRNT","VRRM","VRS","VRSK","VRSN","VRT","VRTV","VS","VSAT","VSEC","VSH","VST","VSTM","VSTO","VTGN","VTI","VTIQ","VTNR","VTOL","VTR","VTSI","VUZI","VVI","VVNT","VVOS","VVPR","VVV","VWE","VWO","VWTR","VYGR","VYNE","VZIO","WAB","WABC","WAFD","WAL","WASH","WAT","WATT","WBS","WBT","WCC","WCN","WD","WDFC","WEC","WELL","WEN","WERN","WES","WETF","WEX","WFG","WFRD","WGO","WH","WHD","WHG","WIMI","WING","WIRE","WISA","WIT","WIX","WK","WKEY","WLDN","WLK","WLKP","WLL","WLTW","WM","WMC","WMG","WMK","WMS","WNC","WNEB","WNS","WOR","WOW","WPC","WPG","WPP","WPRT","WRAP","WRB","WRE","WRI","WRK","WRLD","WSBC","WSBF","WSC","WSFS","WSM","WSO","WSR","WST","WTBA","WTFC","WTI","WTRG","WTRH","WTS","WTTR","WU","WVE","WWD","WWE","WWR","WWW","WYY","XAIR","XBI","XBIT","XEC","XEL","XENE","XENT","XERS","XFOR","XHR","XIN","XL","XLB","XLF","XLRN","XLU","XLY","XM","XME","XNCR","XNET","XOG","XONE","XP","XPEL","XPER","XPO","XPOA","XRAY","XRX","XSPA","XXII","XYL","Y","YALA","YCBD","YELL","YEXT","YMAB","YMTX","YORW","YQ","YRD","YSG","YUMC","YVR","ZBH","ZBRA","ZDGE","ZEN","ZEPP","ZEUS","ZEV","ZG","ZGNX","ZH","ZI","ZIM","ZION","ZIOP","ZIP","ZIXI","ZKIN","ZLAB","ZNH","ZNTE","ZNTL","ZTO","ZTS","ZUMZ","ZUO","ZVO","ZY","ZYME","ZYNE","ZYXI"];
</script>
    

	
Some notes: 
	
1. Quote data comes from Yahoo Finance and is real-time. Auto-refresh is per 10 seconds.
2. "Elevated price/volume activity" is measured on the scale of minutes. Precisely, a notification occurs when a quote has four times the average volume or price over roughly the last two minutes of data.
4. This is currently designed for desktop use. Mobile is basically unusable, both from the interface point of view, and from the fact that mobile browsers sleep.
